@{
    ViewBag.Title = "GioHang";
    Layout = "~/Views/Shared/_LayoutPageChung.cshtml";
}
@using _2001230970_Trần_Lê_Thùy_Trâm_Buổi_10.Models;
@model List<GioHang>
<h2>GIỎ HÀNG CỦA BẠN</h2>
<div class="card border-dark">
    <table class="table">
        <tr style="background-color:lightyellow">
            <th>MÃ SÁCH</th>
            <th>TÊN SÁCH</th>
            <th>ẢNH BÌA</th>
            <th>SỐ LƯỢNG</th>
            <th>ĐƠN GIÁ</th>
            <th>THÀNH TIỀN</th>
            <th colspan="3" style="text-align:center;">
                @Html.ActionLink("Xóa tất cả sản phẩm", "XoaGioHang_All", "GioHang")
            </th>
        </tr>

        @foreach (var item in Model)
        {
            //using (Html.BeginForm("CapNhatGioHang", "GioHang", new { @MaSP = item.iMaSach }))
            //{
                <tr>
                    <td width="10%">@item.iMaSach</td>
                    <td width="20%">@item.sTenSach</td>
                    <td width="20%">
                        <img src="~/HinhAnhSP/@item.sAnhBia" width="120px" />
                    </td>
                    @*<td width="10%">
                        <input type="number" min="1" name="txtSoLuong" value="@item.iSoLuong" size="2" class="form-control text-center" />
                    </td>*@
                    <td width="12%" style="white-space: nowrap;">
                        <a href="@Url.Action("GiamSL", "GioHang", new { MaSP = item.iMaSach })" class="btn btn-sm" style="background-color:#ffffff">-</a>
                        @item.iSoLuong
                        <a href="@Url.Action("TangSL", "GioHang", new { MaSP = item.iMaSach })" class="btn btn-sm" style="background-color:#ffffff">+</a>
                    </td>
                    <td width="10%">@string.Format("{0:0,0}", item.dDonGia)</td>
                    <td width="10%">@string.Format("{0:0,0}", item.dThanhTien)</td>
                    <td width="10%">
                        <a href="~/Sach/XemChiTiet?ms=@item.iMaSach">Xem chi tiết</a>
                    </td>
                    <td width="10%">
                        @Html.ActionLink("Delete", "XoaGioHang", new { @MaSP = item.iMaSach })
                    </td>
                </tr>
            @*}*@
        }

        <tr style="background-color:lightyellow">
            <td colspan="3" style="color:blue; font-weight:bold; text-align:right;">Tổng cộng:</td>
            <td style="color:red; font-weight:bold;">SL: @ViewBag.TongSoLuong</td>
            <td colspan="5" style="color:red; font-weight:bold; text-align:left;">
                TT: @String.Format("{0:0,0}", ViewBag.TongThanhTien) VNĐ
            </td>
        </tr>
    </table>
</div>

